"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/sheets";
exports.ids = ["pages/api/sheets"];
exports.modules = {

/***/ "googleapis":
/*!*****************************!*\
  !*** external "googleapis" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("googleapis");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsheets&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsheets.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsheets&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsheets.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_sheets_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/sheets.ts */ \"(api)/./pages/api/sheets.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_sheets_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_sheets_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/sheets\",\n        pathname: \"/api/sheets\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_sheets_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNoZWV0cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGc2hlZXRzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2tEO0FBQ2xEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2ZmaWNlLXN1cHBsaWVzLWFwcC8/OTUxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3NoZWV0cy50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NoZWV0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NoZWV0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsheets&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsheets.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/sheets.ts":
/*!*****************************!*\
  !*** ./pages/api/sheets.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var googleapis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! googleapis */ \"googleapis\");\n/* harmony import */ var googleapis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(googleapis__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function getAuthToken() {\n    // 環境変数チェックを追加し、エラーメッセージを改善\n    if (!process.env.GOOGLE_APPLICATION_CREDENTIALS && !process.env.GOOGLE_APPLICATION_CREDENTIALS_JSON) {\n        console.warn(\"Google認証情報が設定されていません。テストモードで実行します。\");\n        return null;\n    }\n    try {\n        // GOOGLE_APPLICATION_CREDENTIALS_JSONが設定されている場合、それを使用\n        if (process.env.GOOGLE_APPLICATION_CREDENTIALS_JSON) {\n            const credentials = JSON.parse(process.env.GOOGLE_APPLICATION_CREDENTIALS_JSON);\n            return new googleapis__WEBPACK_IMPORTED_MODULE_0__.google.auth.GoogleAuth({\n                credentials,\n                scopes: [\n                    \"https://www.googleapis.com/auth/spreadsheets.readonly\"\n                ]\n            });\n        }\n        // 従来の方法（ファイルパス）\n        return new googleapis__WEBPACK_IMPORTED_MODULE_0__.google.auth.GoogleAuth({\n            keyFile: process.env.GOOGLE_APPLICATION_CREDENTIALS,\n            scopes: [\n                \"https://www.googleapis.com/auth/spreadsheets.readonly\"\n            ]\n        });\n    } catch (error) {\n        console.error(\"Auth error:\", error);\n        return null;\n    }\n}\nasync function handler(req, res) {\n    if (req.method === \"GET\") {\n        const { sheet } = req.query;\n        if (!process.env.SHEET_ID) {\n            console.error(\"SHEET_ID is not set in environment variables\");\n            // テスト用のダミーデータを返す\n            return res.status(200).json([\n                [\n                    \"store1\",\n                    \"テスト店舗1\",\n                    \"東京都渋谷区\",\n                    \"03-1234-5678\",\n                    \"山田太郎\",\n                    \"test1@example.com\"\n                ],\n                [\n                    \"store2\",\n                    \"テスト店舗2\",\n                    \"大阪府大阪市\",\n                    \"06-1234-5678\",\n                    \"佐藤次郎\",\n                    \"test2@example.com\"\n                ]\n            ]);\n        }\n        try {\n            const auth = await getAuthToken();\n            // 認証情報が取得できない場合はテストデータを返す\n            if (!auth) {\n                console.warn(\"認証情報が取得できませんでした。テストデータを返します。\");\n                return res.status(200).json([\n                    [\n                        \"store1\",\n                        \"テスト店舗1\",\n                        \"東京都渋谷区\",\n                        \"03-1234-5678\",\n                        \"山田太郎\",\n                        \"test1@example.com\"\n                    ],\n                    [\n                        \"store2\",\n                        \"テスト店舗2\",\n                        \"大阪府大阪市\",\n                        \"06-1234-5678\",\n                        \"佐藤次郎\",\n                        \"test2@example.com\"\n                    ]\n                ]);\n            }\n            const sheets = googleapis__WEBPACK_IMPORTED_MODULE_0__.google.sheets({\n                version: \"v4\",\n                auth\n            });\n            // Available_itemsシートの範囲を修正してK列まで含める\n            let range = \"\";\n            if (sheet === \"Available_items\") {\n                range = \"Available_items!A2:L\" // K列まで拡張\n                ;\n            } else if (sheet === \"Order_history\") {\n                range = \"Order_history!A2:AV\" // 注文履歴は広い範囲を取得\n                ;\n            } else if (sheet === \"hirock_item_history\") {\n                range = \"hirock_item_history!A2:AV\" // ハイロックの注文履歴も同じ範囲を取得\n                ;\n            } else {\n                range = `${sheet}`;\n            }\n            const response = await sheets.spreadsheets.values.get({\n                spreadsheetId: process.env.SHEET_ID,\n                range: range\n            });\n            if (!response.data.values) {\n                return res.status(404).json({\n                    error: \"No data found\"\n                });\n            }\n            if (sheet === \"Available_items\") {\n                // 商品データをより効率的に処理\n                const processedItems = processAvailableItems(response.data.values);\n                res.status(200).json(processedItems);\n            } else if (sheet === \"Order_history\" || sheet === \"hirock_item_history\") {\n                // 注文履歴データを処理\n                const processedOrders = processOrderHistory(response.data.values);\n                res.status(200).json(processedOrders);\n            } else {\n                res.status(200).json(response.data.values);\n            }\n        } catch (error) {\n            console.error(\"Error details:\", error);\n            res.status(500).json({\n                error: \"Error fetching data from Google Sheets\",\n                details: error instanceof Error ? error.message : \"Unknown error\"\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\"\n        ]);\n        res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n}\n// 商品データ処理を別関数に分離して最適化\nfunction processAvailableItems(rows) {\n    const groupedItems = new Map();\n    // スプレッドシートの各行を処理\n    rows.forEach((row)=>{\n        const [id, category, name, color, size, amount, price, pricePerPiece, leadTime, partnerName, partnerEmail, imageUrl] = row;\n        // 商品名をキーとして使用\n        const key = name;\n        if (!groupedItems.has(key)) {\n            // 新しい商品の場合、初期データを設定\n            groupedItems.set(key, {\n                id: id || Math.random().toString(36).substring(2, 9),\n                category: category || \"\",\n                name: name || \"\",\n                colors: new Set(),\n                sizes: new Set(),\n                amounts: new Set(),\n                prices: {},\n                pricesPerPiece: {},\n                leadTime: leadTime || \"2週間\",\n                partnerName: partnerName || \"\",\n                partnerEmail: partnerEmail || \"\",\n                imageUrl: imageUrl || \"\"\n            });\n        }\n        // 修正箇所2: 必ず存在することを保証\n        const item = groupedItems.get(key)// 非nullアサーション演算子を使用\n        ;\n        // カラーとサイズを追加（存在する場合）\n        if (color) item.colors.add(color);\n        if (size) item.sizes.add(size);\n        // 画像URLを追加（存在する場合）\n        if (imageUrl && !item.imageUrl) {\n            item.imageUrl = imageUrl;\n        }\n        // 数量を追加（販促グッズの場合は特に重要）\n        if (amount) {\n            // 数値に変換して保存\n            const amountValue = amount.toString().replace(/[^0-9]/g, \"\");\n            if (amountValue) {\n                const numAmount = Number.parseInt(amountValue, 10);\n                item.amounts.add(numAmount);\n                // 対応する価格も保存\n                if (price) {\n                    item.prices[numAmount] = price;\n                }\n                // 1個あたりの価格も保存\n                if (pricePerPiece) {\n                    item.pricesPerPiece[numAmount] = pricePerPiece;\n                }\n            }\n        }\n    });\n    // グループ化したデータを配列に変換\n    return Array.from(groupedItems.values()).map((item)=>{\n        // 数量を昇順にソート\n        const sortedAmounts = Array.from(item.amounts).sort((a, b)=>a - b);\n        // 対応する価格の配列を作成\n        const sortedPrices = sortedAmounts.map((amount)=>item.prices[amount] || \"0\");\n        // 対応する1個あたりの価格の配列を作成\n        const sortedPricesPerPiece = sortedAmounts.map((amount)=>item.pricesPerPiece[amount] || \"0\");\n        return {\n            id: item.id,\n            category: item.category,\n            name: item.name,\n            colors: Array.from(item.colors),\n            sizes: Array.from(item.sizes),\n            amounts: sortedAmounts,\n            prices: sortedPrices,\n            pricesPerPiece: sortedPricesPerPiece,\n            leadTime: item.leadTime,\n            partnerName: item.partnerName,\n            partnerEmail: item.partnerEmail,\n            imageUrl: item.imageUrl\n        };\n    });\n}\n// 特定の販促グッズリストを定義\nconst specialPromotionalItems = [\n    \"ポイントカード\",\n    \"サブスクメンバーズカード\",\n    \"サブスクフラ���ヤー\",\n    \"フリーチケット\",\n    \"クーポン券\",\n    \"名刺\",\n    \"のぼり\",\n    \"お年賀(マイクロファイバークロス)\"\n];\n// 特定のアイテムかどうかを判定する関数\nconst isSpecialItem = (itemName)=>{\n    return specialPromotionalItems.some((name)=>itemName.includes(name));\n};\n// 注文履歴データを処理する関数\nfunction processOrderHistory(rows) {\n    return rows.map((row, index)=>{\n        // 基本情報を抽出\n        const orderNumber = row[0] || `ORD-${(index + 1).toString().padStart(5, \"0\")}`;\n        const orderDate = row[1] || \"\";\n        const orderTime = row[2] || \"\";\n        const storeName = row[3] || \"\";\n        const email = row[4] || \"\";\n        // 商品情報を抽出\n        const items = [];\n        for(let i = 5; i < Math.min(row.length, 33); i += 4){\n            // 商品名が存在する場合のみ追加\n            if (row[i]) {\n                const itemName = row[i] || \"\";\n                const itemSize = row[i + 1] || \"\";\n                const itemColor = row[i + 2] || \"\";\n                const itemQuantity = row[i + 3] || \"1\";\n                items.push({\n                    name: itemName,\n                    size: itemSize,\n                    color: itemColor,\n                    quantity: itemQuantity\n                });\n            }\n        }\n        // 出荷日とステータスを取得\n        const shippingDate = row[45] || null // AT列（46番目、0から始まるので45）\n        ;\n        const status = row[46] || \"処理中\" // AU列（47番目、0から始まるので46）\n        ;\n        return {\n            orderNumber,\n            orderDate,\n            orderTime,\n            storeName,\n            email,\n            items,\n            status,\n            shippingDate\n        };\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSx1QkFBdUI7O1FBRXZELE9BQU87WUFDTGdEO1lBQ0FFO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0E5RTtZQUNBdUY7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZmZpY2Utc3VwcGxpZXMtYXBwLy4vcGFnZXMvYXBpL3NoZWV0cy50cz84MzU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdvb2dsZSB9IGZyb20gXCJnb29nbGVhcGlzXCJcbmltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCJcblxuLy8g5L+u5q2j566H5omAMTog5Z6L5a6a576p44KS6L+95YqgXG4vLyDplqLmlbDjga7liY3jgavku6XkuIvjga7lnovlrprnvqnjgpLov73liqBcbnR5cGUgR3JvdXBlZEl0ZW0gPSB7XG4gIGlkOiBzdHJpbmdcbiAgY2F0ZWdvcnk6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgY29sb3JzOiBTZXQ8c3RyaW5nPlxuICBzaXplczogU2V0PHN0cmluZz5cbiAgYW1vdW50czogU2V0PG51bWJlcj4gLy8g5pWw5YCk5Z6L44GuU2V044Go44GX44Gm5a6a576pXG4gIHByaWNlczogeyBba2V5OiBudW1iZXJdOiBzdHJpbmcgfVxuICBwcmljZXNQZXJQaWVjZTogeyBba2V5OiBudW1iZXJdOiBzdHJpbmcgfVxuICBsZWFkVGltZTogc3RyaW5nXG4gIHBhcnRuZXJOYW1lOiBzdHJpbmdcbiAgcGFydG5lckVtYWlsOiBzdHJpbmdcbiAgaW1hZ2VVcmw/OiBzdHJpbmcgLy8g55S75YOPVVJM44KS6L+95YqgXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEF1dGhUb2tlbigpIHtcbiAgLy8g55Kw5aKD5aSJ5pWw44OB44Kn44OD44Kv44KS6L+95Yqg44GX44CB44Ko44Op44O844Oh44OD44K744O844K444KS5pS55ZaEXG4gIGlmICghcHJvY2Vzcy5lbnYuR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTICYmICFwcm9jZXNzLmVudi5HT09HTEVfQVBQTElDQVRJT05fQ1JFREVOVElBTFNfSlNPTikge1xuICAgIGNvbnNvbGUud2FybihcIkdvb2dsZeiqjeiovOaDheWgseOBjOioreWumuOBleOCjOOBpuOBhOOBvuOBm+OCk+OAguODhuOCueODiOODouODvOODieOBp+Wun+ihjOOBl+OBvuOBmeOAglwiKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdPT0dMRV9BUFBMSUNBVElPTl9DUkVERU5USUFMU19KU09O44GM6Kit5a6a44GV44KM44Gm44GE44KL5aC05ZCI44CB44Gd44KM44KS5L2/55SoXG4gICAgaWYgKHByb2Nlc3MuZW52LkdPT0dMRV9BUFBMSUNBVElPTl9DUkVERU5USUFMU19KU09OKSB7XG4gICAgICBjb25zdCBjcmVkZW50aWFscyA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTX0pTT04pXG4gICAgICByZXR1cm4gbmV3IGdvb2dsZS5hdXRoLkdvb2dsZUF1dGgoe1xuICAgICAgICBjcmVkZW50aWFscyxcbiAgICAgICAgc2NvcGVzOiBbXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3NwcmVhZHNoZWV0cy5yZWFkb25seVwiXSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8g5b6T5p2l44Gu5pa55rOV77yI44OV44Kh44Kk44Or44OR44K577yJXG4gICAgcmV0dXJuIG5ldyBnb29nbGUuYXV0aC5Hb29nbGVBdXRoKHtcbiAgICAgIGtleUZpbGU6IHByb2Nlc3MuZW52LkdPT0dMRV9BUFBMSUNBVElPTl9DUkVERU5USUFMUyxcbiAgICAgIHNjb3BlczogW1wiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9zcHJlYWRzaGVldHMucmVhZG9ubHlcIl0sXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBlcnJvcjpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgY29uc3QgeyBzaGVldCB9ID0gcmVxLnF1ZXJ5XG5cbiAgICBpZiAoIXByb2Nlc3MuZW52LlNIRUVUX0lEKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiU0hFRVRfSUQgaXMgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXNcIilcbiAgICAgIC8vIOODhuOCueODiOeUqOOBruODgOODn+ODvOODh+ODvOOCv+OCkui/lOOBmVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKFtcbiAgICAgICAgW1wic3RvcmUxXCIsIFwi44OG44K544OI5bqX6IiXMVwiLCBcIuadseS6rOmDvea4i+iwt+WMulwiLCBcIjAzLTEyMzQtNTY3OFwiLCBcIuWxseeUsOWkqumDjlwiLCBcInRlc3QxQGV4YW1wbGUuY29tXCJdLFxuICAgICAgICBbXCJzdG9yZTJcIiwgXCLjg4bjgrnjg4jlupfoiJcyXCIsIFwi5aSn6Ziq5bqc5aSn6Ziq5biCXCIsIFwiMDYtMTIzNC01Njc4XCIsIFwi5L2Q6Jek5qyh6YOOXCIsIFwidGVzdDJAZXhhbXBsZS5jb21cIl0sXG4gICAgICBdKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBhdXRoID0gYXdhaXQgZ2V0QXV0aFRva2VuKClcblxuICAgICAgLy8g6KqN6Ki85oOF5aCx44GM5Y+W5b6X44Gn44GN44Gq44GE5aC05ZCI44Gv44OG44K544OI44OH44O844K/44KS6L+U44GZXG4gICAgICBpZiAoIWF1dGgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwi6KqN6Ki85oOF5aCx44GM5Y+W5b6X44Gn44GN44G+44Gb44KT44Gn44GX44Gf44CC44OG44K544OI44OH44O844K/44KS6L+U44GX44G+44GZ44CCXCIpXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihbXG4gICAgICAgICAgW1wic3RvcmUxXCIsIFwi44OG44K544OI5bqX6IiXMVwiLCBcIuadseS6rOmDvea4i+iwt+WMulwiLCBcIjAzLTEyMzQtNTY3OFwiLCBcIuWxseeUsOWkqumDjlwiLCBcInRlc3QxQGV4YW1wbGUuY29tXCJdLFxuICAgICAgICAgIFtcInN0b3JlMlwiLCBcIuODhuOCueODiOW6l+iIlzJcIiwgXCLlpKfpmKrlupzlpKfpmKrluIJcIiwgXCIwNi0xMjM0LTU2NzhcIiwgXCLkvZDol6TmrKHpg45cIiwgXCJ0ZXN0MkBleGFtcGxlLmNvbVwiXSxcbiAgICAgICAgXSlcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2hlZXRzID0gZ29vZ2xlLnNoZWV0cyh7XG4gICAgICAgIHZlcnNpb246IFwidjRcIixcbiAgICAgICAgYXV0aCxcbiAgICAgIH0pXG5cbiAgICAgIC8vIEF2YWlsYWJsZV9pdGVtc+OCt+ODvOODiOOBruevhOWbsuOCkuS/ruato+OBl+OBpkvliJfjgb7jgaflkKvjgoHjgotcbiAgICAgIGxldCByYW5nZSA9IFwiXCJcbiAgICAgIGlmIChzaGVldCA9PT0gXCJBdmFpbGFibGVfaXRlbXNcIikge1xuICAgICAgICByYW5nZSA9IFwiQXZhaWxhYmxlX2l0ZW1zIUEyOkxcIiAvLyBL5YiX44G+44Gn5ouh5by1XG4gICAgICB9IGVsc2UgaWYgKHNoZWV0ID09PSBcIk9yZGVyX2hpc3RvcnlcIikge1xuICAgICAgICByYW5nZSA9IFwiT3JkZXJfaGlzdG9yeSFBMjpBVlwiIC8vIOazqOaWh+WxpeattOOBr+W6g+OBhOevhOWbsuOCkuWPluW+l1xuICAgICAgfSBlbHNlIGlmIChzaGVldCA9PT0gXCJoaXJvY2tfaXRlbV9oaXN0b3J5XCIpIHtcbiAgICAgICAgcmFuZ2UgPSBcImhpcm9ja19pdGVtX2hpc3RvcnkhQTI6QVZcIiAvLyDjg4/jgqTjg63jg4Pjgq/jga7ms6jmloflsaXmrbTjgoLlkIzjgZjnr4Tlm7LjgpLlj5blvpdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmdlID0gYCR7c2hlZXR9YFxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLmdldCh7XG4gICAgICAgIHNwcmVhZHNoZWV0SWQ6IHByb2Nlc3MuZW52LlNIRUVUX0lELFxuICAgICAgICByYW5nZTogcmFuZ2UsXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLmRhdGEudmFsdWVzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIk5vIGRhdGEgZm91bmRcIiB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoc2hlZXQgPT09IFwiQXZhaWxhYmxlX2l0ZW1zXCIpIHtcbiAgICAgICAgLy8g5ZWG5ZOB44OH44O844K/44KS44KI44KK5Yq5546H55qE44Gr5Yem55CGXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZEl0ZW1zID0gcHJvY2Vzc0F2YWlsYWJsZUl0ZW1zKHJlc3BvbnNlLmRhdGEudmFsdWVzKVxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9jZXNzZWRJdGVtcylcbiAgICAgIH0gZWxzZSBpZiAoc2hlZXQgPT09IFwiT3JkZXJfaGlzdG9yeVwiIHx8IHNoZWV0ID09PSBcImhpcm9ja19pdGVtX2hpc3RvcnlcIikge1xuICAgICAgICAvLyDms6jmloflsaXmrbTjg4fjg7zjgr/jgpLlh6bnkIZcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkT3JkZXJzID0gcHJvY2Vzc09yZGVySGlzdG9yeShyZXNwb25zZS5kYXRhLnZhbHVlcylcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocHJvY2Vzc2VkT3JkZXJzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzcG9uc2UuZGF0YS52YWx1ZXMpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZXRhaWxzOlwiLCBlcnJvcilcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiRXJyb3IgZmV0Y2hpbmcgZGF0YSBmcm9tIEdvb2dsZSBTaGVldHNcIixcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICAgIH0pXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5zZXRIZWFkZXIoXCJBbGxvd1wiLCBbXCJHRVRcIl0pXG4gICAgcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKVxuICB9XG59XG5cbi8vIOWVhuWTgeODh+ODvOOCv+WHpueQhuOCkuWIpemWouaVsOOBq+WIhumbouOBl+OBpuacgOmBqeWMllxuZnVuY3Rpb24gcHJvY2Vzc0F2YWlsYWJsZUl0ZW1zKHJvd3M6IGFueVtdW10pIHtcbiAgY29uc3QgZ3JvdXBlZEl0ZW1zID0gbmV3IE1hcDxzdHJpbmcsIEdyb3VwZWRJdGVtPigpXG5cbiAgLy8g44K544OX44Os44OD44OJ44K344O844OI44Gu5ZCE6KGM44KS5Yem55CGXG4gIHJvd3MuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgY29uc3QgW1xuICAgICAgaWQsXG4gICAgICBjYXRlZ29yeSxcbiAgICAgIG5hbWUsXG4gICAgICBjb2xvcixcbiAgICAgIHNpemUsXG4gICAgICBhbW91bnQsXG4gICAgICBwcmljZSxcbiAgICAgIHByaWNlUGVyUGllY2UsXG4gICAgICBsZWFkVGltZSxcbiAgICAgIHBhcnRuZXJOYW1lLFxuICAgICAgcGFydG5lckVtYWlsLFxuICAgICAgaW1hZ2VVcmwsXG4gICAgXSA9IHJvd1xuXG4gICAgLy8g5ZWG5ZOB5ZCN44KS44Kt44O844Go44GX44Gm5L2/55SoXG4gICAgY29uc3Qga2V5ID0gbmFtZVxuXG4gICAgaWYgKCFncm91cGVkSXRlbXMuaGFzKGtleSkpIHtcbiAgICAgIC8vIOaWsOOBl+OBhOWVhuWTgeOBruWgtOWQiOOAgeWIneacn+ODh+ODvOOCv+OCkuioreWumlxuICAgICAgZ3JvdXBlZEl0ZW1zLnNldChrZXksIHtcbiAgICAgICAgaWQ6IGlkIHx8IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KSxcbiAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5IHx8IFwiXCIsXG4gICAgICAgIG5hbWU6IG5hbWUgfHwgXCJcIixcbiAgICAgICAgY29sb3JzOiBuZXcgU2V0PHN0cmluZz4oKSxcbiAgICAgICAgc2l6ZXM6IG5ldyBTZXQ8c3RyaW5nPigpLFxuICAgICAgICBhbW91bnRzOiBuZXcgU2V0PG51bWJlcj4oKSxcbiAgICAgICAgcHJpY2VzOiB7fSxcbiAgICAgICAgcHJpY2VzUGVyUGllY2U6IHt9LFxuICAgICAgICBsZWFkVGltZTogbGVhZFRpbWUgfHwgXCIy6YCx6ZaTXCIsXG4gICAgICAgIHBhcnRuZXJOYW1lOiBwYXJ0bmVyTmFtZSB8fCBcIlwiLFxuICAgICAgICBwYXJ0bmVyRW1haWw6IHBhcnRuZXJFbWFpbCB8fCBcIlwiLCAvLyDjg5Hjg7zjg4jjg4rjg7zjga7jg6Hjg7zjg6vjgqLjg4njg6zjgrlcbiAgICAgICAgaW1hZ2VVcmw6IGltYWdlVXJsIHx8IFwiXCIsIC8vIOeUu+WDj1VSTFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyDkv67mraPnrofmiYAyOiDlv4XjgZrlrZjlnKjjgZnjgovjgZPjgajjgpLkv53oqLxcbiAgICBjb25zdCBpdGVtID0gZ3JvdXBlZEl0ZW1zLmdldChrZXkpISAvLyDpnZ5udWxs44Ki44K144O844K344On44Oz5ryU566X5a2Q44KS5L2/55SoXG5cbiAgICAvLyDjgqvjg6njg7zjgajjgrXjgqTjgrrjgpLov73liqDvvIjlrZjlnKjjgZnjgovloLTlkIjvvIlcbiAgICBpZiAoY29sb3IpIGl0ZW0uY29sb3JzLmFkZChjb2xvcilcbiAgICBpZiAoc2l6ZSkgaXRlbS5zaXplcy5hZGQoc2l6ZSlcblxuICAgIC8vIOeUu+WDj1VSTOOCkui/veWKoO+8iOWtmOWcqOOBmeOCi+WgtOWQiO+8iVxuICAgIGlmIChpbWFnZVVybCAmJiAhaXRlbS5pbWFnZVVybCkge1xuICAgICAgaXRlbS5pbWFnZVVybCA9IGltYWdlVXJsXG4gICAgfVxuXG4gICAgLy8g5pWw6YeP44KS6L+95Yqg77yI6LKp5L+D44Kw44OD44K644Gu5aC05ZCI44Gv54m544Gr6YeN6KaB77yJXG4gICAgaWYgKGFtb3VudCkge1xuICAgICAgLy8g5pWw5YCk44Gr5aSJ5o+b44GX44Gm5L+d5a2YXG4gICAgICBjb25zdCBhbW91bnRWYWx1ZSA9IGFtb3VudC50b1N0cmluZygpLnJlcGxhY2UoL1teMC05XS9nLCBcIlwiKVxuICAgICAgaWYgKGFtb3VudFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG51bUFtb3VudCA9IE51bWJlci5wYXJzZUludChhbW91bnRWYWx1ZSwgMTApXG4gICAgICAgIGl0ZW0uYW1vdW50cy5hZGQobnVtQW1vdW50KVxuXG4gICAgICAgIC8vIOWvvuW/nOOBmeOCi+S+oeagvOOCguS/neWtmFxuICAgICAgICBpZiAocHJpY2UpIHtcbiAgICAgICAgICBpdGVtLnByaWNlc1tudW1BbW91bnRdID0gcHJpY2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDHlgIvjgYLjgZ/jgorjga7kvqHmoLzjgoLkv53lrZhcbiAgICAgICAgaWYgKHByaWNlUGVyUGllY2UpIHtcbiAgICAgICAgICBpdGVtLnByaWNlc1BlclBpZWNlW251bUFtb3VudF0gPSBwcmljZVBlclBpZWNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLy8g44Kw44Or44O844OX5YyW44GX44Gf44OH44O844K/44KS6YWN5YiX44Gr5aSJ5o+bXG4gIHJldHVybiBBcnJheS5mcm9tKGdyb3VwZWRJdGVtcy52YWx1ZXMoKSkubWFwKChpdGVtKSA9PiB7XG4gICAgLy8g5pWw6YeP44KS5piH6aCG44Gr44K944O844OIXG4gICAgY29uc3Qgc29ydGVkQW1vdW50cyA9IEFycmF5LmZyb20oaXRlbS5hbW91bnRzKS5zb3J0KChhLCBiKSA9PiBhIC0gYilcblxuICAgIC8vIOWvvuW/nOOBmeOCi+S+oeagvOOBrumFjeWIl+OCkuS9nOaIkFxuICAgIGNvbnN0IHNvcnRlZFByaWNlcyA9IHNvcnRlZEFtb3VudHMubWFwKChhbW91bnQpID0+IGl0ZW0ucHJpY2VzW2Ftb3VudF0gfHwgXCIwXCIpXG5cbiAgICAvLyDlr77lv5zjgZnjgosx5YCL44GC44Gf44KK44Gu5L6h5qC844Gu6YWN5YiX44KS5L2c5oiQXG4gICAgY29uc3Qgc29ydGVkUHJpY2VzUGVyUGllY2UgPSBzb3J0ZWRBbW91bnRzLm1hcCgoYW1vdW50KSA9PiBpdGVtLnByaWNlc1BlclBpZWNlW2Ftb3VudF0gfHwgXCIwXCIpXG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICBjYXRlZ29yeTogaXRlbS5jYXRlZ29yeSxcbiAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgIGNvbG9yczogQXJyYXkuZnJvbShpdGVtLmNvbG9ycyksXG4gICAgICBzaXplczogQXJyYXkuZnJvbShpdGVtLnNpemVzKSxcbiAgICAgIGFtb3VudHM6IHNvcnRlZEFtb3VudHMsXG4gICAgICBwcmljZXM6IHNvcnRlZFByaWNlcyxcbiAgICAgIHByaWNlc1BlclBpZWNlOiBzb3J0ZWRQcmljZXNQZXJQaWVjZSxcbiAgICAgIGxlYWRUaW1lOiBpdGVtLmxlYWRUaW1lLFxuICAgICAgcGFydG5lck5hbWU6IGl0ZW0ucGFydG5lck5hbWUsXG4gICAgICBwYXJ0bmVyRW1haWw6IGl0ZW0ucGFydG5lckVtYWlsLCAvLyDjg5Hjg7zjg4jjg4rjg7zjga7jg6Hjg7zjg6vjgqLjg4njg6zjgrnjgpLov5TjgZlcbiAgICAgIGltYWdlVXJsOiBpdGVtLmltYWdlVXJsLCAvLyDnlLvlg49VUkzjgpLov5TjgZlcbiAgICB9XG4gIH0pXG59XG5cbi8vIOeJueWumuOBruiyqeS/g+OCsOODg+OCuuODquOCueODiOOCkuWumue+qVxuY29uc3Qgc3BlY2lhbFByb21vdGlvbmFsSXRlbXMgPSBbXG4gIFwi44Od44Kk44Oz44OI44Kr44O844OJXCIsXG4gIFwi44K144OW44K544Kv44Oh44Oz44OQ44O844K644Kr44O844OJXCIsXG4gIFwi44K144OW44K544Kv44OV44Op77+977+977+944Ok44O8XCIsXG4gIFwi44OV44Oq44O844OB44Kx44OD44OIXCIsXG4gIFwi44Kv44O844Od44Oz5Yi4XCIsXG4gIFwi5ZCN5Yi6XCIsXG4gIFwi44Gu44G844KKXCIsXG4gIFwi44GK5bm06LOAKOODnuOCpOOCr+ODreODleOCoeOCpOODkOODvOOCr+ODreOCuSlcIixcbl1cblxuLy8g54m55a6a44Gu44Ki44Kk44OG44Og44GL44Gp44GG44GL44KS5Yik5a6a44GZ44KL6Zai5pWwXG5jb25zdCBpc1NwZWNpYWxJdGVtID0gKGl0ZW1OYW1lOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHNwZWNpYWxQcm9tb3Rpb25hbEl0ZW1zLnNvbWUoKG5hbWUpID0+IGl0ZW1OYW1lLmluY2x1ZGVzKG5hbWUpKVxufVxuXG4vLyDms6jmloflsaXmrbTjg4fjg7zjgr/jgpLlh6bnkIbjgZnjgovplqLmlbBcbmZ1bmN0aW9uIHByb2Nlc3NPcmRlckhpc3Rvcnkocm93czogYW55W11bXSkge1xuICAvLyDkv67mraPnrofmiYAzOiDmmI7npLrnmoTjgarlnovlrprnvqnjgpLov73liqBcbiAgdHlwZSBPcmRlckl0ZW0gPSB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgc2l6ZTogc3RyaW5nXG4gICAgY29sb3I6IHN0cmluZ1xuICAgIHF1YW50aXR5OiBzdHJpbmdcbiAgfVxuXG4gIHJldHVybiByb3dzLm1hcCgocm93LCBpbmRleCkgPT4ge1xuICAgIC8vIOWfuuacrOaDheWgseOCkuaKveWHulxuICAgIGNvbnN0IG9yZGVyTnVtYmVyID0gcm93WzBdIHx8IGBPUkQtJHsoaW5kZXggKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDUsIFwiMFwiKX1gXG4gICAgY29uc3Qgb3JkZXJEYXRlID0gcm93WzFdIHx8IFwiXCJcbiAgICBjb25zdCBvcmRlclRpbWUgPSByb3dbMl0gfHwgXCJcIlxuICAgIGNvbnN0IHN0b3JlTmFtZSA9IHJvd1szXSB8fCBcIlwiXG4gICAgY29uc3QgZW1haWwgPSByb3dbNF0gfHwgXCJcIlxuXG4gICAgLy8g5ZWG5ZOB5oOF5aCx44KS5oq95Ye6XG4gICAgY29uc3QgaXRlbXM6IE9yZGVySXRlbVtdID0gW11cbiAgICBmb3IgKGxldCBpID0gNTsgaSA8IE1hdGgubWluKHJvdy5sZW5ndGgsIDMzKTsgaSArPSA0KSB7XG4gICAgICAvLyDllYblk4HlkI3jgYzlrZjlnKjjgZnjgovloLTlkIjjga7jgb/ov73liqBcbiAgICAgIGlmIChyb3dbaV0pIHtcbiAgICAgICAgY29uc3QgaXRlbU5hbWUgPSByb3dbaV0gfHwgXCJcIlxuICAgICAgICBjb25zdCBpdGVtU2l6ZSA9IHJvd1tpICsgMV0gfHwgXCJcIlxuICAgICAgICBjb25zdCBpdGVtQ29sb3IgPSByb3dbaSArIDJdIHx8IFwiXCJcbiAgICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gcm93W2kgKyAzXSB8fCBcIjFcIlxuXG4gICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgICAgIHNpemU6IGl0ZW1TaXplLFxuICAgICAgICAgIGNvbG9yOiBpdGVtQ29sb3IsXG4gICAgICAgICAgcXVhbnRpdHk6IGl0ZW1RdWFudGl0eSxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDlh7rojbfml6Xjgajjgrnjg4bjg7zjgr/jgrnjgpLlj5blvpdcbiAgICBjb25zdCBzaGlwcGluZ0RhdGUgPSByb3dbNDVdIHx8IG51bGwgLy8gQVTliJfvvIg0NueVquebruOAgTDjgYvjgonlp4vjgb7jgovjga7jgac0Ne+8iVxuICAgIGNvbnN0IHN0YXR1cyA9IHJvd1s0Nl0gfHwgXCLlh6bnkIbkuK1cIiAvLyBBVeWIl++8iDQ355Wq55uu44CBMOOBi+OCieWni+OBvuOCi+OBruOBpzQ277yJXG5cbiAgICByZXR1cm4ge1xuICAgICAgb3JkZXJOdW1iZXIsXG4gICAgICBvcmRlckRhdGUsXG4gICAgICBvcmRlclRpbWUsXG4gICAgICBzdG9yZU5hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIGl0ZW1zLFxuICAgICAgc3RhdHVzLFxuICAgICAgc2hpcHBpbmdEYXRlLFxuICAgIH1cbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJnb29nbGUiLCJnZXRBdXRoVG9rZW4iLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTIiwiR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTX0pTT04iLCJjb25zb2xlIiwid2FybiIsImNyZWRlbnRpYWxzIiwiSlNPTiIsInBhcnNlIiwiYXV0aCIsIkdvb2dsZUF1dGgiLCJzY29wZXMiLCJrZXlGaWxlIiwiZXJyb3IiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2hlZXQiLCJxdWVyeSIsIlNIRUVUX0lEIiwic3RhdHVzIiwianNvbiIsInNoZWV0cyIsInZlcnNpb24iLCJyYW5nZSIsInJlc3BvbnNlIiwic3ByZWFkc2hlZXRzIiwidmFsdWVzIiwiZ2V0Iiwic3ByZWFkc2hlZXRJZCIsImRhdGEiLCJwcm9jZXNzZWRJdGVtcyIsInByb2Nlc3NBdmFpbGFibGVJdGVtcyIsInByb2Nlc3NlZE9yZGVycyIsInByb2Nlc3NPcmRlckhpc3RvcnkiLCJkZXRhaWxzIiwiRXJyb3IiLCJtZXNzYWdlIiwic2V0SGVhZGVyIiwiZW5kIiwicm93cyIsImdyb3VwZWRJdGVtcyIsIk1hcCIsImZvckVhY2giLCJyb3ciLCJpZCIsImNhdGVnb3J5IiwibmFtZSIsImNvbG9yIiwic2l6ZSIsImFtb3VudCIsInByaWNlIiwicHJpY2VQZXJQaWVjZSIsImxlYWRUaW1lIiwicGFydG5lck5hbWUiLCJwYXJ0bmVyRW1haWwiLCJpbWFnZVVybCIsImtleSIsImhhcyIsInNldCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImNvbG9ycyIsIlNldCIsInNpemVzIiwiYW1vdW50cyIsInByaWNlcyIsInByaWNlc1BlclBpZWNlIiwiaXRlbSIsImFkZCIsImFtb3VudFZhbHVlIiwicmVwbGFjZSIsIm51bUFtb3VudCIsIk51bWJlciIsInBhcnNlSW50IiwiQXJyYXkiLCJmcm9tIiwibWFwIiwic29ydGVkQW1vdW50cyIsInNvcnQiLCJhIiwiYiIsInNvcnRlZFByaWNlcyIsInNvcnRlZFByaWNlc1BlclBpZWNlIiwic3BlY2lhbFByb21vdGlvbmFsSXRlbXMiLCJpc1NwZWNpYWxJdGVtIiwiaXRlbU5hbWUiLCJzb21lIiwiaW5jbHVkZXMiLCJpbmRleCIsIm9yZGVyTnVtYmVyIiwicGFkU3RhcnQiLCJvcmRlckRhdGUiLCJvcmRlclRpbWUiLCJzdG9yZU5hbWUiLCJlbWFpbCIsIml0ZW1zIiwiaSIsIm1pbiIsImxlbmd0aCIsIml0ZW1TaXplIiwiaXRlbUNvbG9yIiwiaXRlbVF1YW50aXR5IiwicHVzaCIsInF1YW50aXR5Iiwic2hpcHBpbmdEYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/sheets.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsheets&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsheets.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();